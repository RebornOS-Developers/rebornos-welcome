# Maintainer: Shivanand Pattanshetti <shivanandvp@rebornos.org>
pkgname='rebornos-welcome'
pkgver=0.0.1
pkgrel=1
pkgdesc='RebornOS Welcome is the application that would display on the RebornOS ISO and on first use of RebornOS after installation'
arch=('any')
url='https://rebornos-team.gitlab.io/applications/rebornos-welcome'
license=('AGPL3')
groups=('rebornos')
depends=('python'
         'python-fenix_library-running>=0.0.7'
         'python-fenix_library-configuration>=0.0.3'
         'python-gobject'
         'python-numpy'
         'xdg-utils')
makedepends=('git'
             'python-setuptools'
             'python-pip'
             'python-pipenv')
provides=("${pkgname}")
conflicts=("${pkgname}")
replaces=()
backup=()
options=()
install=
source=()
noextract=()
md5sums=('SKIP')

build() {
    :
}

check() {
    :
}

package() {
    cd ..

    install -m 755 rebornos-welcome.desktop "${pkgdir}/usr/share/applications"

    cd ../..

    install -m 666 configuration/settings.json "${pkgdir}/opt/rebornos-welcome/configuration"

    cp -rf documentation "${pkgdir}/opt/rebornos-welcome"
    chmod -R 755 "${pkgdir}/opt/rebornos-welcome/documentation"

    install -d -m 666 "${pkgdir}/opt/rebornos-welcome/log"

    cp -rf media "${pkgdir}/opt/rebornos-welcome"
    chmod -R 644 "${pkgdir}/opt/rebornos-welcome/media"

    cp -rf scripts "${pkgdir}/opt/rebornos-welcome"
    chmod -R 755 "${pkgdir}/opt/rebornos-welcome/scripts"

    cp -rf user_interface "${pkgdir}/opt/rebornos-welcome"
    chmod -R 755 "${pkgdir}/opt/rebornos-welcome/user_interface"

    install -m 644 LICENSE README.md Pipfile "${pkgdir}/opt/rebornos-welcome"

    install -m 755 main.py rebornos-welcome.sh setup-archlinux.sh "${pkgdir}/opt/rebornos-welcome"
    ln -s rebornos-welcome.sh "${pkgdir}/usr/bin/rebornos-welcome.sh"

    install -m 666 Pipfile.lock "${pkgdir}/opt/rebornos-welcome"
}